version: "3"
services:
  app:
    build: .
    # command: celery  -B -A Book-book worker -l info --uid redis
    command: celery  -B -A Book-book worker -l info
    volumes:
      - .:/Book-book
    links:
      - redis
    container_name: book
    environment:
      - C_FORCE_ROOT=true
    depends_on:
      - redis

  redis:
    image: "redis"
    container_name: database
    # command:
    #   - "redis-server"
    #   - "--loglevel ${REDIS_LOGLEVEL:-warning}"
    #   - "--databases 2"
    #   - "--save 900 1"
    #   - "--save 300 10"
    #   - "--save 60 10000"
    #   - "--maxmemory ${REDIS_MAXMEM:-50mb}"
    #   - "--maxmemory-policy ${REDIS_POLICY:-noeviction}"
    # volumes:
    #   - redis:data
    environment:
      - C_FORCE_ROOT=true
# volumes:
#   redis:
#     driver_opts:
#       type: none
#       device: $PWD
# o: bind
